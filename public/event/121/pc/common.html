<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>pc-121</title>
  <link rel="stylesheet" href="../pc.css">
</head>

<body>
  <div id="content"></div>

  <script>
    // history.pushState 오버라이드
    const originalPushState = window.history.pushState;
    window.history.pushState = function () {
      // pushState 무시
      return;
    };

    var xhr = new XMLHttpRequest();
    xhr.open('GET', '/event/121/pc/pc-content.html', true);
    xhr.onreadystatechange = function () {
      if (this.readyState === 4 && this.status === 200) {
        document.getElementById('content').innerHTML = this.responseText;

        // 스크립트 실행 전에 postParam 함수 오버라이드
        window.postParam = function () {
          // URL 변경 로직 무시
          return;
        };

        // 스크립트를 찾아서 실행
        var scripts = document.getElementById('content').getElementsByTagName('script');
        Array.from(scripts).forEach(script => {
          var newScript = document.createElement('script');
          Array.from(script.attributes).forEach(attr => {
            newScript.setAttribute(attr.name, attr.value)
          });
          newScript.appendChild(document.createTextNode(script.innerHTML));
          script.parentNode.replaceChild(newScript, script);
        });
      }
    };
    xhr.send();

    // popstate 이벤트도 막기
    window.addEventListener('popstate', function (e) {
      e.preventDefault();
      return false;
    });
  </script>
</body>

</html>